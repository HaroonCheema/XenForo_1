<xf:title page="{$page}">{{ phrase('z61_classifieds') }}</xf:title>

<xf:macro template="metadata_macros" name="canonical_url"
	arg-canonicalUrl="{{ link('canonical:classifieds', null, {'page': $page}) }}" />

<xf:page option="searchConstraints" value="{{ {
	phrase('z61_classifieds_listings'): {'search_type': 'classifieds_listing'}
} }}" />

<xf:pageaction if="$xf.visitor.canAddClassified() && $categoryTree is not empty">
	<xf:button href="{{ link('classifieds/add') }}" class="button--cta" icon="write" overlay="true">{{ phrase('z61_classifieds_add_listing...') }}</xf:button>
</xf:pageaction>

<xf:if is="$canInlineMod">
	<xf:js src="xf/inline_mod.js" min="1" />
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="classifieds_listing" data-href="{{ link('inline-mod') }}">
	<div class="block-outer"><xf:trim>

		<xf:pagenav page="{$page}" perpage="{$perPage}" total="{$total}"
			link="classifieds" params="{$filters}"
			wrapperclass="block-outer-main" />

		<xf:if contentcheck="true">
			<div class="block-outer-opposite">
				<div class="buttonGroup">
				<xf:contentcheck>
					<xf:if is="$canInlineMod">
						<xf:macro template="inline_mod_macros" name="button" />
					</xf:if>
				</xf:contentcheck>
				</div>
			</div>
		</xf:if>

	</xf:trim></div>

	<div class="block-container">
		<xf:macro template="z61_classifieds_overview_macros" name="list_filter_bar"
			arg-filters="{$filters}"
			arg-baseLinkPath="classifieds"
			arg-creatorFilter="{$creatorFilter}"
			arg-conditionFilter="{$conditionFilter}"
			arg-listingTypeFilter="{$listingTypeFilter}"
			arg-addressFilter="{$addressFilter}"/>

		<div class="block-body">
			<xf:if is="$xf.options.z61ClassifiedsListLayout == 'list_view'">
				<xf:if is="$featuredListings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$featuredListings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</xf:if>
				<xf:if is="$listings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('z61_classifieds_there_no_listings_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('z61_classifieds_no_listings_have_been_created_yet') }}</div>
				</xf:if>
			<xf:elseif is="$xf.options.z61ClassifiedsListLayout == 'grid_view'" />
				<xf:if is="$featuredListings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$featuredListings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_grid"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
				</xf:if>
				<xf:if is="$listings is not empty">
					<div class="structItemContainer">
						<xf:foreach loop="$listings" value="$listing">
							<xf:macro template="z61_classifieds_listing_list_macros" name="listing_grid"
									  arg-listing="{$listing}" />
						</xf:foreach>
					</div>
					<xf:elseif is="$filters" />
					<div class="block-row">{{ phrase('z61_classifieds_there_no_listings_matching_your_filters') }}</div>
					<xf:else />
					<div class="block-row">{{ phrase('z61_classifieds_no_listings_have_been_created_yet') }}</div>
				</xf:if>
			</xf:if>
		</div>
	</div>

	<div class="block-outer block-outer--after">
		<xf:pagenav
			page="{$page}" perpage="{$perPage}" total="{$total}"
			link="classifieds" params="{$filters}"
			wrapperclass="block-outer-main" />
		<xf:showignored wrapperclass="block-outer-opposite" />
	</div>
</div>

<xf:page option="sideNavTitle">{{ phrase('categories') }}</xf:page>
<xf:sidenav>
	<xf:macro template="z61_classifieds_category_list_macros" name="simple_list_block"
		arg-categoryTree="{$categoryTree}"
		arg-categoryExtras="{$categoryExtras}" />
</xf:sidenav>

<xf:widgetpos id="classifieds_overview_sidenav" position="sidenav" />