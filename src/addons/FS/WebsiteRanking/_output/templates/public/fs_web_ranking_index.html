<xf:title page="{$page}">{{ phrase('fs_website_ranking') }}</xf:title>

<xf:if is="$xf.options.fs_web_ranking_parent_web_id != 0">
<xf:if is="$siteStatus">
	<xf:include template="fs_wesite_ranking_status" />
</xf:if>
</xf:if>

<div class="block" data-xf-init="{{ $canInlineMod ? 'inline-mod' : '' }}" data-type="fs_website_ranking" data-href="{{ link('inline-mod') }}">
	<div class="block-outer">

	</div>
	<xf:if is="$xf.options.fs_web_ranking_parent_web_id != 0">
		<div class="block-container">

			<xf:macro name="search_menu" arg-conditions="{$conditions}" />

			<!--Listing View--->
			<div class="block-body">

				<!--Website Ranking List View--->
				<xf:if is="count($data) != 0">

					<div class="block webRankingListBlock" data-xf-init="inline-mod" data-type="fs_website_ranking" data-href="{{ link('inline-mod') }}">

						<div class="webRankingList h-dFlex h-dFlex--wrap gridCardList--flex--{$xf.options.fs_website_ranking_per_row}-col" data-xf-init="fs_website_ranking_list">

							<xf:foreach loop="{$data}" value="$value">

								<xf:macro name="data_in_list" arg-data="{$value}" arg-siteUrl="{$siteUrl}" />

							</xf:foreach>
						</div>
					</div>
				</xf:if>

				<xf:css src="fs_web_ranking_list.less" />
				<xf:css src="fs_web_ranking_style.less" />
				<xf:css src="fs_web_ranking_grid_card.less" />

				<!--Website Ranking List View--->

				<div class="block-footer">
					<span class="block-footer-counter">{{ display_totals($totalReturn, $total) }}</span>
				</div>

				<xf:pagenav
							page="{$page}"
							perpage="{$perPage}"
							total="{$total}"
							link="{$siteUrl}"
							data="{$search}"
							params="{{ {'':$conditions, 'mod': $activeModType } }}"
							wrapperclass="block"
							/>
			</div>
		</div>

		<div class="block-outer block-outer--after">

			<xf:showignored wrapperclass="block-outer-opposite" />
		</div>
		<xf:else />
		<div class="block-container">

			<div class="block-body">
				<div class="block-body block-row">{{ phrase('no_items_have_been_created_yet') }}</div>
			</div></div>
	</xf:if>
</div>

<!-- Filter Bar Macro Start -->

<!--Website Ranking List View--->

<xf:macro name="data_in_list" arg-data="!" arg-siteUrl="!">
	<div class="gridCard js-inlineModContainer visible public" id="{{ unique_id() }}">
		<div class="gridCard--container">
			<!-- Cover -->
			<div class="gridCard--cover">
				<div class="webRankingCover--wrapper">
					<div class="webRankingCover webRankingCoverFrame webRankingCover--default" style="background-color:#{{$data.getRandomColor()}};color:#70dbb8">
						<a href="{{ link('forums', $data) }}" style="color:#fff">
							<span class="webRankingCover--text">{{ snippet($data.title, 25) }}</span>
						</a>
					</div>
				</div>
			</div>
			<!-- Cover -->
			<!-- Header -->
			<div class="gridCard--header">
				<!-- Avatar -->
				<div class="gridCard--header--avatar">
					<xf:avatar user="$xf.visitor" size="l" />
				</div>
				<!-- Avatar -->
				<!-- Header Main -->
				<div class="gridCard--header--main">
					<xf:trim>
						<a href="{{ link('forums', $data) }}" class="gridCard--header--title" data-tp-primary="on">
							<span>{$data.title}</span>
						</a>
					</xf:trim>
					<xf:trim>
						<ul class="listInline webRanking--counterList u-muted">
							<li class="webRankingItem-stat webRankingItem-stat--viewCount" style="margin-right:10px;">
								<xf:fa icon="fa-eye" />
								{$data.getViewCounts()}
							</li>
							<li class="webRankingItem-stat webRankingItem-stat--discussionCount">
								<xf:fa icon="fa-comment" />
								{$data.Forum.message_count}
							</li>
						</ul>
					</xf:trim>
				</div>
				<!-- Header Main -->
			</div>
			<!-- Header -->
			<xf:if contentcheck="true">
				<div class="gridCard--body">
					<xf:contentcheck>
						<div class="webRankingList--description u-muted">{$data.description}</div>
					</xf:contentcheck>
				</div>
			</xf:if>
		</div>
	</div>
</xf:macro>
<!--Website Ranking List View--->

<!-- Filter Bar Macro Start -->

<xf:macro name="search_menu" arg-conditions="!">
	<div class="block-filterBar">
		<div class="filterBar">
			<a
			   class="filterBar-menuTrigger"
			   data-xf-click="menu"
			   role="button"
			   tabindex="0"
			   aria-expanded="false"
			   aria-haspopup="true"
			   >{{ phrase('filters') }}</a
				>
			<div
				 class="menu menu--wide"
				 data-menu="menu"
				 aria-hidden="true"
				 data-href="{{ link('web-ranking/refine-search', null, $conditions)}}"
				 data-load-target=".js-filterMenuBody"
				 >
				<div class="menu-content">
					<h4 class="menu-header">{{ phrase('show_only:') }}</h4>
					<div class="js-filterMenuBody">
						<div class="menu-row">{{ phrase('loading...') }}</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</xf:macro>