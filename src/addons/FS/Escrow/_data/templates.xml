<?xml version="1.0" encoding="utf-8"?>
<templates>
  <template type="admin" title="fs_escrow_admin_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title page="{$page}">{{ phrase('escrow_admin_title') }}</xf:title>
<div class="block-container">
	<xf:macro name="search_menu" arg-conditions="{$conditions}" />
        <xf:if is="count($escrows) > 0 ">
          <div class="block-body">
            <xf:datalist data-xf-init="responsive-data-list">
              <xf:macro
                name="escrows_table_list"
                arg-escrows="{$escrows}"
              />
            </xf:datalist>
          </div>

          <xf:else />
          <div class="block-body block-row">
            {{ phrase('no_any_data_found') }}
          </div>
        </xf:if>
	<div class="block-footer">
  
    <div class="block-body block-row">
      <dl class="pairs pairs--justified">
        <dt><span class="block-footer-counter">{{ display_totals($escrows, $total) }}</span></dt>
        <dd>
       <xf:pagenav
            page="{$page}"
            perpage="{$perPage}"
            total="{$total}"
            link="escrow"
            data="{$escrows}"
            params="{$escrows}"
            wrapperclass="block-outer-main"
          />
      </dd>
      </dl>
      </div>
  </div>
      </div>

<xf:macro name="escrows_table_list" arg-escrows="!">

  <xf:datarow rowtype="header">
    <xf:cell> {{ phrase('fs_escrow_admin_title') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_admin_from') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_admin_to') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_admin_amount') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_admin_status') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_admin_date') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_admins_lastUpdate') }} </xf:cell>
	  
	  
  </xf:datarow>
  <xf:foreach loop="$escrows" value="$escrow">
    <xf:datarow>
		<xf:if is="{{$escrow.Thread}}">
      <xf:cell> {{ snippet($escrow.Thread.title, 35, {'stripBbCode': true}) }}  </xf:cell>
      <xf:cell> {{$escrow.Thread.User.username }} </xf:cell>
      <xf:cell> {{$escrow.User.username}} </xf:cell>
      <xf:cell>{{$escrow.escrow_amount}}</xf:cell>
      <xf:cell>
		  <xf:macro name="status"
			arg-status="{$escrow.escrow_status}"/>
		</xf:cell>
		
      <xf:cell><xf:date time="$escrow.Thread.post_date" /></xf:cell>
      <xf:cell><xf:date time="$escrow.last_update" /></xf:cell>
		</xf:if>
			
    </xf:datarow>
  </xf:foreach>
</xf:macro>

<xf:macro name="status"
	arg-status="!"
	>
		<xf:if is="$status==0">
			{{ phrase('fs_escrow_status_0') }}
		<xf:elseif is="$status == 1" />
			{{ phrase('fs_escrow_status_1') }}
		<xf:elseif is="$status == 2" />
			{{ phrase('fs_escrow_status_2') }}
		<xf:elseif is="$status == 3" />
			{{ phrase('fs_escrow_status_3') }}
		<xf:elseif is="$status == 4" />
			{{ phrase('fs_escrow_status_4') }}
		<xf:else/>
			{{ phrase('fs_escrow_status_undefined') }}
		</xf:if>
	</xf:macro>

<!-- Filter Bar Macro Start -->

<xf:macro name="search_menu" arg-conditions="!">
  <div class="block-filterBar">
    <div class="filterBar">
      <a
        class="filterBar-menuTrigger"
        data-xf-click="menu"
        role="button"
        tabindex="0"
        aria-expanded="false"
        aria-haspopup="true"
        >{{ phrase('filters') }}</a
      >
      <div
        class="menu menu--wide"
        data-menu="menu"
        aria-hidden="true"
        data-href="{{ link('escrow/refine-search', null, $conditions)}}"
        data-load-target=".js-filterMenuBody"
      >
        <div class="menu-content">
          <h4 class="menu-header">{{ phrase('show_only:') }}</h4>
          <div class="js-filterMenuBody">
            <div class="menu-row">{{ phrase('loading...') }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</xf:macro>]]></template>
  <template type="admin" title="fs_escrow_search_filter" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:form action="{{ link('escrow') }}">
	<div class="menu-row">
    	{{ phrase('fs_escrow_start_username:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="fs_escrow_start_username" value="{$conditions.fs_escrow_start_username}" ac="single" />
		</div>
  	</div>
	
	<div class="menu-row">
    	{{ phrase('fs_escrow_mentioned_username:') }}
		<div class="u-inputSpacer">
			<xf:textbox name="fs_escrow_mentioned_username" value="{$conditions.fs_escrow_mentioned_username}" ac="single" />
		</div>
  	</div>
	
	<div class="menu-row menu-row--separated">
			{{ phrase('fs_escrow_form_status:') }}
			<div class="u-inputSpacer">
				<xf:select name="fs_escrow_status" value="{$conditions.fs_escrow_status}">
					<xf:option value="all" selected="true" label="{{ phrase('all') }}" />
					<xf:option value="0" label="{{ phrase('fs_escrow_status_0') }}" />
					<xf:option value="1" label="{{ phrase('fs_escrow_status_1') }}" />
					<xf:option value="2" label="{{ phrase('fs_escrow_status_2') }}" />
					<xf:option value="3" label="{{ phrase('fs_escrow_status_3') }}" />
					<xf:option value="4" label="{{ phrase('fs_escrow_status_4') }}" />
				</xf:select>
			</div>
		</div>
	
	
	  <div class="menu-footer">
    <span class="menu-footer-controls">
      <xf:button type="submit" class="button--primary"
        >{{ phrase('filter') }}</xf:button
      >
    </span>
  </div>

  <xf:hiddenval name="search">1</xf:hiddenval>
</xf:form>]]></template>
  <template type="public" title="fs_escrow_addEdit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('fs_add_escrow') }}</xf:title>
<xf:form action="{{ link('auction/categories/bidding', $auction) }}" ajax="true" class="block" data-xf-init="attachment-manager">
	
	<div class="block-container">
		<div class="block-body">
	<!--		<xf:formrow label="{{ phrase('escrow_currency_type') }}">
				<div class="inputChoices">
					<xf:radio name="currency_type">
						<xf:option label="{{ phrase('currency_type_xmr') }}" value="xmr">
						</xf:option>
						<xf:option label="{{ phrase('currency_type_btc') }}" value="btc">
						</xf:option>
					</xf:radio>
				</div>
		</xf:formrow> -->
			<xf:textboxrow name="escrow_amount" value=""   label="{{ phrase('escrow_title') }}" />
				
			
			<xf:macro name="description"
					  arg-description="{$category.draft_resource.message}"
					  arg-attachmentData="{$attachmentData}"
					  arg-previewUrl="{{ link('resources/categories/preview', $category) }}" />
			<xf:formrow>
					<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
				
			</xf:formrow>
			
			<xf:numberboxrow name="escrow_amount" value="" explain="{{ phrase('escrow_total_amount') }}" min="0" label="{{ phrase('escrow_amount') }}" />
			
			<xf:textboxrow name="starter" value="{{ $starterFilter ? $starterFilter.username : '' }}" label="{{ phrase('escrow_user') }}" ac="single"
				maxlength="{{ max_length($xf.visitor, 'username') }}" id="ctrl_started_by" />
			
	
	<xf:submitrow icon="save" sticky="true" />
		</div>
	</div>
</xf:form>


<xf:macro name="description" arg-description="" arg-attachmentData="{{ [] }}" arg-previewUrl="">
	<div data-xf-init="attachment-manager">
		<xf:editorrow name="description" value="{$description}" data-min-height="200"
					  attachments="{$attachmentData.attachments}"
					  label="{{ phrase('description') }}"
					  data-preview-url="{$previewUrl}" />

		<xf:formrow>
			<xf:if is="$attachmentData">
				<xf:macro template="helper_attach_upload" name="upload_block" arg-attachmentData="{$attachmentData}" />
			</xf:if>
		</xf:formrow>
	</div>
</xf:macro>]]></template>
  <template type="public" title="fs_escrow_approve" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('fs_escrow_confirm_action') }}</xf:title>

<xf:form action="{{ link('escrow/approve',$escrow) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('fs_escrow_please_confirm_that_you_want_to_approve_following:') }}
					<strong>{$escrow.Thread.title}</strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="approve" />
	</div>
</xf:form>]]></template>
  <template type="public" title="fs_escrow_cancel" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('fs_escrow_confirm_action') }}</xf:title>

<xf:form action="{{ link('escrow/cancel',$escrow) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('fs_escrow_please_confirm_that_you_want_to_cancel_following:') }}
					<strong>{$escrow.Thread.title}</strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="cancel" />
	</div>
</xf:form>]]></template>
  <template type="public" title="fs_escrow_deposit" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title> {{ phrase('fs_escrow_deposit') }} </xf:title>

<xf:wrap template="account_wrapper" />

<xf:form
  action="{{ link('escrow/deposit-save') }}"
  ajax="true"
  class="block"
  data-force-flash-message="true"
>
  <div class="block-container">
    <div class="block-body">
      <xf:numberboxrow name="deposit_amount" explain="{{ phrase('escrow_current_amount') }} {$xf.visitor.deposit_amount}" min="0" label="{{ phrase('fs_escrow_amount') }}" />
    </div>
    <xf:submitrow submit="" icon="save" />
  </div>
</xf:form>]]></template>
  <template type="public" title="fs_escrow_escrow_list" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block-container">
	<div class="block-body">
		<xf:if is="count($escrows) > 0 ">
		
				  <xf:foreach loop="$escrows" value="$escrow">
					<xf:macro template="fs_escrow_list_macro" name="escrow"
					arg-escrow="{$escrow}"
					arg-containerClass="contentRow-minor" />
				</xf:foreach>
			
				
		<xf:else />
          <div class="block-body block-row">
            {{ phrase('no_any_data_found') }}
          </div> 
        </xf:if>
	</div>
</div>]]></template>
  <template type="public" title="fs_escrow_landing" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title page="{$page}">{{ phrase('fs_escrow_rules_heading') }}</xf:title>
<div class="block-container">
    <div class="block-body">
		<xf:macro template="notice_macros" name="notice_list" arg-type="block" arg-notices="{$rules}" />
		<xf:pageaction>
			<xf:if is="$xf.visitor.user_id!=0">
				 <xf:button
					href="{{ link('escrow/add') }}"
					class="button--cta"
					icon="write"
					>{{ phrase('fs_escrow_add') }}</xf:button>
			</xf:if>
			
		</xf:pageaction>
		<!--start tabs-->
		<xf:if is="$xf.visitor.user_id!=0 OR $xf.visitor.is_admin">
			<div class="block">
				<h2 class="block-tabHeader block-tabHeader--memberTabs tabs hScroller"
					data-xf-init="tabs h-scroller"
					data-panes=".js-memberTabPanes"
					data-state="replace"
					role="tablist">
					<span class="hScroller-scroll">
						<!--[XF:tabs:start]-->
							<a href="{{ link('members/my-escrow',$xf.visitor ) }}"
							   class="tabs-tab" id="my-escrow" role="tab">
								{{ phrase('fs_my_escrow') }}
							</a>

							<a href="{{ link('members/mentioned-escrow',$xf.visitor) }}"
							   class="tabs-tab" id="mentioned-escrow" role="tab">
								{{ phrase('fs_mentioned_escrow') }}
							</a>

							<a href="{{ link('members/logs',$xf.visitor) }}"
							   class="tabs-tab" id="escrow-logs" role="tab">
								{{ phrase('fs_escrow_logs') }}
							</a>

						<!--[XF:tabs:end]-->
					</span>
				</h2>
			</div>
		</xf:if>
		<!--tabs content-->
		
		<ul class="tabPanes js-memberTabPanes">
			<!--[XF:tab_panes:start]-->

			<xf:if is="$xf.visitor.user_id!=0 OR $xf.visitor.is_admin">
				<li data-href="{{ link('members/my-escrow',$xf.visitor) }}" role="tabpanel" aria-labelledby="my-escrow">
						<div class="blockMessage">{{ phrase('loading...') }}</div>
				</li>
				<li data-href="{{ link('members/mentioned-escrow',$xf.visitor) }}" role="tabpanel" aria-labelledby="mentioned-escrow">
						<div class="blockMessage">{{ phrase('loading...') }}</div>
				</li>
				<li data-href="{{ link('members/logs',$xf.visitor) }}" role="tabpanel" aria-labelledby="escrow-logs">
						<div class="blockMessage">{{ phrase('loading...') }}</div>
				</li>
			<xf:else />
				<div class="blockMessage">{{ phrase('fs_escrow_you_must_login') }}</div>
				
			</xf:if>

			<!--[XF:tab_panes:end]-->
		</ul>

		
		
    
    </div>
 </div>]]></template>
  <template type="public" title="fs_escrow_list_macro" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:macro name="escrow"
	arg-escrow="!"
	>
	<xf:if is="$escrow And $escrow.Thread.escrow_id!=0">
		<div class="block-row block-row--separated  js-inlineModContainer" >
			<div class="contentRow ">
				<span class="contentRow-figure">
					<xf:avatar user="{$escrow.Thread.User}" size="s" defaultname="{$escrow.Thread.User.username}" />
				</span>
				<div class="contentRow-main">
					<h3 class="contentRow-title">
						<a href="{{ link('threads', $escrow.Thread) }}">{{$escrow.Thread.title}}</a>
					</h3>
					<div class="contentRow-minor contentRow-minor--hideLinks">
						<ul class="listInline listInline--bullet">
							<li><xf:username user="{$escrow.Thread.User}" defaultname="{$escrow.Thread.User.username}" /></li>
							<li><xf:date time="{$escrow.Thread.post_date}" /></li>
							<li>{{ phrase('fs_escrow_amount:') }} {$escrow.escrow_amount|number}</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</xf:if>		
	
</xf:macro>	



<!-- placingProperTableCellTemplate -->

<xf:macro name="logs_table_list" arg-logs="!">

  <xf:datarow rowtype="header">
    <xf:cell> {{ phrase('fs_escrow_trans_type') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_trans_date') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_trans_amount') }} </xf:cell>
    <xf:cell> {{ phrase('fs_escrow_trans_current') }} </xf:cell>

  </xf:datarow>
  <xf:foreach loop="$logs" value="$log">
    <xf:datarow>
      <xf:cell> {{$log.transaction_type}} </xf:cell>
      <xf:cell><xf:date time="$log.created_at" /></xf:cell>
      <xf:cell> {{$log.transaction_amount }} </xf:cell>
      <xf:cell>{{$log.current_amount}}</xf:cell>

    </xf:datarow>
  </xf:foreach>
</xf:macro>


<xf:macro name="status"
	arg-status="!"
	>
	<div class="block-body block-row">
		<xf:if is="$status==0">
			{{ phrase('fs_escrow_status_0') }}
		<xf:elseif is="$status == 1" />
			{{ phrase('fs_escrow_status_1') }}
		<xf:elseif is="$status == 2" />
			{{ phrase('fs_escrow_status_2') }}
		<xf:elseif is="$status == 3" />
			{{ phrase('fs_escrow_status_3') }}
		<xf:elseif is="$status == 4" />
			{{ phrase('fs_escrow_status_4') }}
		<xf:else/>
			{{ phrase('fs_escrow_status_undefined') }}
		</xf:if>
     </div> 
		
	
	</xf:macro>]]></template>
  <template type="public" title="fs_escrow_logs" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block-container">
  <div class="block-body">
	  
    <xf:form action="{{ link($prefix . '/toggle') }}" class="block" ajax="true">
      <div class="block-container">
        <xf:if is="count($logs) > 0 ">
          <div class="block-body">
            <xf:datalist data-xf-init="responsive-data-list">
              <xf:macro
				template="fs_escrow_list_macro"
                name="logs_table_list"
                arg-logs="{$logs}"
              />
            </xf:datalist>
          </div>

          <xf:else />
          <div class="block-body block-row">
            {{ phrase('no_any_transaction_found') }}
          </div>
        </xf:if>
      </div>
    </xf:form>
  </div>]]></template>
  <template type="public" title="fs_escrow_mentioned_escrow" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<div class="block-container">
	<div class="block-body">
		<xf:if is="count($escrows) > 0 ">
			  <xf:foreach loop="$escrows" value="$escrow">
			<xf:macro template="fs_escrow_list_macro" name="escrow"
			arg-escrow="{$escrow}"
			arg-containerClass="contentRow-minor" />
			</xf:foreach>
		<xf:else />
          <div class="block-body block-row">
            {{ phrase('no_any_data_found') }}
          </div>
        </xf:if>
	</div>
</div>]]></template>
  <template type="public" title="fs_escrow_payment" version_id="1000010" version_string="1.0.0 Alpha"><![CDATA[<xf:title>{{ phrase('fs_escrow_confirm_action') }}</xf:title>

<xf:form action="{{ link('escrow/payments',$escrow) }}" ajax="true" class="block">
	<div class="block-container">
		<div class="block-body">
			<xf:inforow rowtype="confirm">
				{{ phrase('fs_escrow_please_confirm_that_you_want_to_payment_following:') }}
					<strong>{$escrow.Thread.title}</strong>
			</xf:inforow>
		</div>
		<xf:submitrow rowtype="simple" icon="payment" />
	</div>
</xf:form>]]></template>
</templates>
